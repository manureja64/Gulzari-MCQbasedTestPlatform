<!DOCTYPE html>
<html lang="en">
<%- include('layouts/header');-%>

    <body>
        <!-- Navigation-->
        <%- include('layouts/navbar');-%>
            <h1>
                <%= title %>
            </h1>
            <form action="" method='POST'>
                <div>
                    <label for="title">Title: </label>
                    <!-- <input type="text" , id="title" , name="title" , value="<%#=  (null===test? '': test.title) %>"> -->
                    <textarea name="title" id="title" cols="30"
                        rows="10"><%=  (null===test? '': test.title) %></textarea>
                    <script>
                        $('#title').summernote({
                            placeholder: 'Title',
                            tabsize: 2,
                            height: 40
                        });

                    </script>

                    <!-- <input type="hidden" name="direction", value="<%#= (null===test.direction?'': test.direction._id %>">
                    <input type="hidden" name="direction", value="<%#= (null===test.direction?'': test.question._id %>"> -->


                    <% if (test) { %>
                        <!-- For Updating Existing Test and/or when errors occur -->
                        <br><label for="numOfOptions">Number of Options: </label>
                        <select name="numOfOptions" id="numOfOptions">
                            <% if (test.numOfOptions===4) { %>
                                <option value="4" selected>4</option>
                                <option value="5">5</option>
                                <% } else { %>
                                    <option value="4">4</option>
                                    <option value="5" selected>5</option>

                                    <% } %>
                        </select>
                        <!-- Selecting duration -->
                        <br><label for="duration">Test Duration: </label>
                        <select name="duration" id="duration">
                            <% if (test.duration===5) { %>
                                <option value="5" selected>5 minutes</option>
                                <option value="10">10 minutes</option>
                                <option value="15">15 minutes</option>
                                <option value="20">20 minutes</option>
                                <option value="30">30 minutes</option>
                                <option value="60">1 hour</option>
                                <% } else if (test.duration===10) { %>
                                    <option value="5">5 minutes</option>
                                    <option value="10" selected>10 minutes</option>
                                    <option value="15">15 minutes</option>
                                    <option value="20">20 minutes</option>
                                    <option value="30">30 minutes</option>
                                    <option value="60">1 hour</option>

                                    <% } else if (test.duration===15) { %>
                                        <option value="5">5 minutes</option>
                                        <option value="10">10 minutes</option>
                                        <option value="15" selected>15 minutes</option>
                                        <option value="20">20 minutes</option>
                                        <option value="30">30 minutes</option>
                                        <option value="60">1 hour</option>

                                        <% } else if (test.duration===20) { %>
                                            <option value="5">5 minutes</option>
                                            <option value="10">10 minutes</option>
                                            <option value="15">15 minutes</option>
                                            <option value="20" selected>20 minutes</option>
                                            <option value="30">30 minutes</option>
                                            <option value="60">1 hour</option>

                                            <% } else if (test.duration===30) { %>
                                                <option value="5">5 minutes</option>
                                                <option value="10">10 minutes</option>
                                                <option value="15">15 minutes</option>
                                                <option value="20" selected>20 minutes</option>
                                                <option value="30">30 minutes</option>
                                                <option value="60">1 hour</option>

                                                <% } else if (test.duration===60) { %>
                                                    <option value="5">5 minutes</option>
                                                    <option value="10">10 minutes</option>
                                                    <option value="15">15 minutes</option>
                                                    <option value="20">20 minutes</option>
                                                    <option value="30">30 minutes</option>
                                                    <option value="60" selected>1 hour</option>

                                                    <% } else { %>
                                                        <option value="5">5 minutes</option>
                                                        <option value="10">10 minutes</option>
                                                        <option value="15">15 minutes</option>
                                                        <option value="20">20 minutes</option>
                                                        <option value="30">30 minutes</option>
                                                        <option value="60">1 hour</option>

                                                        <% } %>
                        </select>

                        <!-- Selecting Type -->
                        <br><label for="type">Type of Test (Sectional/Full Length) </label>
                        <select name="type" id="type">
                            <% if (test.type===0) { %>
                                <option value="0" selected>Sectional</option>
                                <option value="1">Full Length</option>
                                <% } else if (test.type===1) { %>
                                    <option value="0">Sectional</option>
                                    <option value="1" selected>Full Length</option>


                                    <% } else { %>
                                        <option value="0">Sectional</option>
                                        <option value="1">Full Length</option>
                                        <% } %>
                        </select>

                        <% } else { %>
                            <!-- For creating a New Test -->
                            <br> <label for="numOfOptions">Number of Options: </label>
                            <select name="numOfOptions" id="numOfOptions">
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>

                            <br><label for="duration">Test Duration: </label>
                            <select name="duration" id="duration">
                                <option value="5">5 minutes</option>
                                <option value="10">10 minutes</option>
                                <option value="15">15 minutes</option>
                                <option value="20">20 minutes</option>
                                <option value="30">30 minutes</option>
                                <option value="60">1 hour</option>
                            </select>

                            <br><label for="type">Type: </label>
                            <select name="type" id="type">
                                <option value="0">Sectional</option>
                                <option value="1">Full Length</option>
                            </select>
                            <% } %>

                                <br><label for="message">Message: </label>
                                <textarea , id="message" , name="message" ,
                                    value="<%= (null===test? '' : test.message) %> "><%= (null===test? '' : test.message) %></textarea>
                                <script>
                                    $('#message').summernote({
                                        placeholder: 'Message for the Test',

                                        tabsize: 2,
                                        height: 200
                                    });
                                </script>

                                <button type="submit">submit</button>

                </div>
                <% if (errors) { %>
                    <ul>
                        <% for( let i=0; i < errors.length; i++ ) { %>
                            <li>
                                <%= errors[i].msg %>
                            </li>

                            <% } %>
                    </ul>

                    <% } %>
            </form>

    </body>

    <script src="js/index.js"></script>

</html>